"use strict";(self.webpackChunksecurityapp=self.webpackChunksecurityapp||[]).push([[678],{3678:(M,h,r)=>{r.r(h),r.d(h,{ChannelModule:()=>E});var u=r(6895),o=r(4006),d=r(9549),p=r(3848),v=r(4144),f=r(4385),c=r(9602),g=r(3238),b=r(4859),C=r(9299),m=r(8746),e=r(4650),A=r(529),I=r(2340),T=r(2720);let U=(()=>{class a{constructor(n,t){this.http=n,this.coreService=t,this.baseUrl=`${I.N.baseUrlApi}/v1/api/channel`}createAsync(n){const t=this.coreService.setHeadersBearer();return this.http.post(`${this.baseUrl}`,n,{headers:t})}readAsync(n){let t=new A.LE({fromObject:{page:n.page.toString(),pageSize:n.pageSize.toString()}});const s=this.coreService.setHeadersBearer();return this.http.get(`${this.baseUrl}`,{headers:s,params:t})}readByIdAsync(n){const t=this.coreService.setHeadersBearer();return this.http.get(`${this.baseUrl}/${n}`,{headers:t})}updateAsync(n){const t=this.coreService.setHeadersBearer();return this.http.put(`${this.baseUrl}`,n,{headers:t})}deleteByIdAsync(n){const t=this.coreService.setHeadersBearer();return this.http.delete(`${this.baseUrl}/${n}`,{headers:t})}}return a.\u0275fac=function(n){return new(n||a)(e.LFG(A.eN),e.LFG(T.p))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var x=r(7282),J=r(9430),N=r(5936);function B(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1," Nome \xe9 obrigat\xf3rio "),e.qZA())}function R(a,l){1&a&&(e.TgZ(0,"mat-error"),e._uU(1," Informe uma URL v\xe1lida (http ou https) "),e.qZA())}const D=[{path:"",component:(()=>{class a{constructor(n,t,s,i){this.fb=n,this.service=t,this.sharedService=s,this.messagesService=i,this.tabLabel="Create",this.isEditing=!1,this.selectedTabIndex=0,this.channels=[]}ngOnInit(){this.form=this.fb.group({id:[{value:crypto.randomUUID(),disabled:!0}],name:["",o.kI.required],createdAt:[{value:new Date,disabled:!0}],updatedAt:[{value:new Date,disabled:!0}],deletedAt:[{value:"",disabled:!0}],type:[0,o.kI.required],lang:[""],url:["",o.kI.pattern("https?://.+")]}),this.columns=[{name:"name",label:"Name"},{name:"type",label:"Type"},{name:"lang",label:"Lang"},{name:"createdAt",label:"Date Create"},{name:"isActive",label:"Active"}],this.filters={page:1,pageSize:25},this.onRead()}onSubmit(){if(this.form.valid){const n=this.form.value;this.sharedService.openSpinner(),this.isEditing?this.service.updateAsync(n).pipe((0,m.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:t=>{this.messagesService.success("Registro atualizado com sucesso:",t),this.form.reset()},error:t=>{this.messagesService.errorHandler(t)}}):this.service.createAsync(n).pipe((0,m.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:t=>{this.messagesService.success("Registro criado com sucesso:",t),this.form.reset()},error:t=>{this.messagesService.errorHandler(t)}})}}onCancel(){this.form.reset(),this.setTab()}setTab(n=0,t=!1,s="Create"){this.selectedTabIndex=n,this.tabLabel=s,this.isEditing=t}handlePage(n){this.filters=n,this.onRead()}onRead(){this.sharedService.openSpinner(),this.service.readAsync(this.filters).pipe((0,m.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:n=>{this.channels=n},error:n=>{this.messagesService.errorHandler(n)}})}onReadById(n){this.sharedService.openSpinner(),this.service.readByIdAsync(n).pipe((0,m.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:t=>{this.channel=t,this.form.patchValue(this.channel),this.setTab(1,!0,"Edit")},error:t=>{this.messagesService.errorHandler(t)}})}onDelete(n){this.sharedService.openSpinner(),this.service.deleteByIdAsync(n).pipe((0,m.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:t=>{const s=this.channels.findIndex(i=>i?.id===n);this.channels.splice(s,1)},error:t=>{this.messagesService.errorHandler(t)}})}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(o.qu),e.Y36(U),e.Y36(x.F),e.Y36(J.K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-channel"]],decls:68,vars:18,consts:[["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],["label","Search"],[3,"columns","data","totalRecords","eventRead","eventReadById","eventDeleteById"],[3,"label"],[1,"container","mt-4"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-6"],["appearance","outline",1,"w-100"],["matInput","","formControlName","id","readonly",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type"],[3,"value"],["matInput","","formControlName","lang"],[1,"col-md-12"],["matInput","","formControlName","url"],[1,"col-md-4"],["matInput","","formControlName","createdAt",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","updatedAt",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","deletedAt",3,"matDatepicker"],["picker3",""],[1,"col-12","text-end"],["mat-raised-button","","color","warn","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,t){if(1&n&&(e.TgZ(0,"mat-tab-group",0),e.NdJ("selectedIndexChange",function(i){return t.selectedTabIndex=i}),e.TgZ(1,"mat-tab",1)(2,"app-list",2),e.NdJ("eventRead",function(i){return t.handlePage(i)})("eventReadById",function(i){return t.onReadById(i)})("eventDeleteById",function(i){return t.onDelete(i)}),e.qZA()(),e.TgZ(3,"mat-tab",3)(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"ID"),e.qZA(),e._UZ(10,"input",8),e.qZA()(),e.TgZ(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Nome"),e.qZA(),e._UZ(15,"input",9),e.YNc(16,B,2,0,"mat-error",10),e.qZA()(),e.TgZ(17,"div",6)(18,"mat-form-field",7)(19,"mat-label"),e._uU(20,"Tipo"),e.qZA(),e.TgZ(21,"mat-select",11)(22,"mat-option",12),e._uU(23,"Interno"),e.qZA(),e.TgZ(24,"mat-option",12),e._uU(25,"Email"),e.qZA(),e.TgZ(26,"mat-option",12),e._uU(27,"WhatsApp"),e.qZA()()()(),e.TgZ(28,"div",6)(29,"mat-form-field",7)(30,"mat-label"),e._uU(31,"Linguagem"),e.qZA(),e._UZ(32,"input",13),e.qZA()(),e.TgZ(33,"div",14)(34,"mat-form-field",7)(35,"mat-label"),e._uU(36,"URL"),e.qZA(),e._UZ(37,"input",15),e.YNc(38,R,2,0,"mat-error",10),e.qZA()(),e.TgZ(39,"div",16)(40,"mat-form-field",7)(41,"mat-label"),e._uU(42,"Created At"),e.qZA(),e._UZ(43,"input",17)(44,"mat-datepicker-toggle",18)(45,"mat-datepicker",null,19),e.qZA()(),e.TgZ(47,"div",16)(48,"mat-form-field",7)(49,"mat-label"),e._uU(50,"Updated At"),e.qZA(),e._UZ(51,"input",20)(52,"mat-datepicker-toggle",18)(53,"mat-datepicker",null,21),e.qZA()(),e.TgZ(55,"div",16)(56,"mat-form-field",7)(57,"mat-label"),e._uU(58,"Deleted At"),e.qZA(),e._UZ(59,"input",22)(60,"mat-datepicker-toggle",18)(61,"mat-datepicker",null,23),e.qZA()(),e.TgZ(63,"div",24)(64,"button",25),e.NdJ("click",function(){return t.onCancel()}),e._uU(65," Cancelar "),e.qZA(),e.TgZ(66,"button",26),e._uU(67," Salvar "),e.qZA()()()()()()),2&n){const s=e.MAs(46),i=e.MAs(54),S=e.MAs(62);let Z,y;e.Q6J("selectedIndex",t.selectedTabIndex),e.xp6(2),e.Q6J("columns",t.columns)("data",t.channels.data)("totalRecords",t.channels.total),e.xp6(1),e.Q6J("label",t.tabLabel),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("ngIf",null==(Z=t.form.get("name"))?null:Z.hasError("required")),e.xp6(6),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",2),e.xp6(12),e.Q6J("ngIf",null==(y=t.form.get("url"))?null:y.hasError("pattern")),e.xp6(5),e.Q6J("matDatepicker",s),e.xp6(1),e.Q6J("for",s),e.xp6(7),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(7),e.Q6J("matDatepicker",S),e.xp6(1),e.Q6J("for",S),e.xp6(6),e.Q6J("disabled",t.form.invalid)}},dependencies:[u.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,d.TO,d.KE,d.hX,d.R9,v.Nt,f.gD,g.ey,c.Mq,c.hl,c.nW,b.lW,p.SP,p.uX,N.n]}),a})()}];let Q=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[C.Bz.forChild(D),C.Bz]}),a})();var L=r(7061);let E=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[u.ez,o.UX,d.lN,v.c,f.LD,c.FA,g.XK,b.ot,p.Nh,Q,L.m]}),a})()}}]);