"use strict";(self.webpackChunksecurityapp=self.webpackChunksecurityapp||[]).push([[678],{3678:(F,p,r)=>{r.r(p),r.d(p,{ChannelModule:()=>M});var h=r(6895),s=r(4006),d=r(9549),c=r(3848),v=r(4144),f=r(4385),m=r(9602),g=r(3238),A=r(4859),C=r(9299),u=r(8746),e=r(4650),b=r(529),I=r(2340),T=r(2720);let U=(()=>{class n{constructor(a,t){this.http=a,this.coreService=t,this.baseUrl=`${I.N.baseUrlApi}/v1/api/channel`}createAsync(a){const t=this.coreService.setHeadersBearer();return this.http.post(`${this.baseUrl}`,a,{headers:t})}readAsync(a){let t=new b.LE({fromObject:{page:a.page.toString(),pageSize:a.pageSize.toString()}});const l=this.coreService.setHeadersBearer();return this.http.get(`${this.baseUrl}`,{headers:l,params:t})}readByIdAsync(a){const t=this.coreService.setHeadersBearer();return this.http.get(`${this.baseUrl}/${a}`,{headers:t})}updateAsync(a){const t=this.coreService.setHeadersBearer();return this.http.put(`${this.baseUrl}`,a,{headers:t})}deleteByIdAsync(a){const t=this.coreService.setHeadersBearer();return this.http.delete(`${this.baseUrl}/${a}`,{headers:t})}}return n.\u0275fac=function(a){return new(a||n)(e.LFG(b.eN),e.LFG(T.p))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var J=r(7282),x=r(9430),D=r(5936);function B(n,i){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Nome \xe9 obrigat\xf3rio "),e.qZA())}function N(n,i){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Informe uma URL v\xe1lida (http ou https) "),e.qZA())}const R=[{path:"",component:(()=>{class n{constructor(a,t,l,o){this.fb=a,this.service=t,this.sharedService=l,this.messagesService=o,this.tabLabel="Create",this.selectedTabIndex=0,this.channels=[]}ngOnInit(){this.form=this.fb.group({id:[{value:crypto.randomUUID(),disabled:!0}],name:["",s.kI.required],createdAt:[{value:new Date,disabled:!0}],updatedAt:[{value:new Date,disabled:!0}],deletedAt:[{value:"",disabled:!0}],type:[0,s.kI.required],lang:[""],url:["",s.kI.pattern("https?://.+")]}),this.columns=[{name:"name",label:"Name"},{name:"type",label:"Type"},{name:"lang",label:"Lang"},{name:"createdAt",label:"Date Create"},{name:"isActive",label:"Active"}],this.filters={page:1,pageSize:25},this.onRead()}onSubmit(){this.form.valid&&this.service.createAsync(this.form.value).subscribe({next:t=>{this.messagesService.success("Registro criado com sucesso:",t),this.form.reset()},error:t=>{this.messagesService.errorHandler(t)}})}setTab(a,t){this.selectedTabIndex=a,this.tabLabel=t}handlePage(a){this.filters=a,this.onRead()}onRead(){this.sharedService.openSpinner(),this.service.readAsync(this.filters).pipe((0,u.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:a=>{this.channels=a},error:a=>{this.messagesService.errorHandler(a)}})}onReadById(a){this.sharedService.openSpinner(),this.service.readByIdAsync(a).pipe((0,u.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:t=>{this.channel=t,this.form.patchValue({id:t.id,name:t.name,createdAt:t.createdAt?new Date(t.createdAt):null,updatedAt:t.updatedAt?new Date(t.updatedAt):null,deletedAt:t.deletedAt?new Date(t.deletedAt):null,type:t.type,lang:t.lang,url:t.url}),this.setTab(1,"Edit")},error:t=>{this.messagesService.errorHandler(t)}})}onDelete(a){this.sharedService.openSpinner(),this.service.deleteByIdAsync(a).pipe((0,u.x)(()=>{const t=this.channels.findIndex(l=>l?.id===a);this.channels.splice(t,1)})).subscribe({next:t=>{this.onRead()},error:t=>{this.messagesService.errorHandler(t)}})}}return n.\u0275fac=function(a){return new(a||n)(e.Y36(s.qu),e.Y36(U),e.Y36(J.F),e.Y36(x.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-channel"]],decls:66,vars:18,consts:[["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],["label","Search"],[3,"columns","data","totalRecords","eventRead","eventReadById","eventDeleteById"],[3,"label"],[1,"container","mt-4"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-6"],["appearance","outline",1,"w-100"],["matInput","","formControlName","id","readonly",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type"],[3,"value"],["matInput","","formControlName","lang"],[1,"col-md-12"],["matInput","","formControlName","url"],[1,"col-md-4"],["matInput","","formControlName","createdAt",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","formControlName","updatedAt",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","deletedAt",3,"matDatepicker"],["picker3",""],[1,"col-12","text-end"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(a,t){if(1&a&&(e.TgZ(0,"mat-tab-group",0),e.NdJ("selectedIndexChange",function(o){return t.selectedTabIndex=o}),e.TgZ(1,"mat-tab",1)(2,"app-list",2),e.NdJ("eventRead",function(o){return t.handlePage(o)})("eventReadById",function(o){return t.onReadById(o)})("eventDeleteById",function(o){return t.onDelete(o)}),e.qZA()(),e.TgZ(3,"mat-tab",3)(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"ID"),e.qZA(),e._UZ(10,"input",8),e.qZA()(),e.TgZ(11,"div",6)(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"Nome"),e.qZA(),e._UZ(15,"input",9),e.YNc(16,B,2,0,"mat-error",10),e.qZA()(),e.TgZ(17,"div",6)(18,"mat-form-field",7)(19,"mat-label"),e._uU(20,"Tipo"),e.qZA(),e.TgZ(21,"mat-select",11)(22,"mat-option",12),e._uU(23,"Interno"),e.qZA(),e.TgZ(24,"mat-option",12),e._uU(25,"Email"),e.qZA(),e.TgZ(26,"mat-option",12),e._uU(27,"WhatsApp"),e.qZA()()()(),e.TgZ(28,"div",6)(29,"mat-form-field",7)(30,"mat-label"),e._uU(31,"Linguagem"),e.qZA(),e._UZ(32,"input",13),e.qZA()(),e.TgZ(33,"div",14)(34,"mat-form-field",7)(35,"mat-label"),e._uU(36,"URL"),e.qZA(),e._UZ(37,"input",15),e.YNc(38,N,2,0,"mat-error",10),e.qZA()(),e.TgZ(39,"div",16)(40,"mat-form-field",7)(41,"mat-label"),e._uU(42,"Created At"),e.qZA(),e._UZ(43,"input",17)(44,"mat-datepicker-toggle",18)(45,"mat-datepicker",null,19),e.qZA()(),e.TgZ(47,"div",16)(48,"mat-form-field",7)(49,"mat-label"),e._uU(50,"Updated At"),e.qZA(),e._UZ(51,"input",20)(52,"mat-datepicker-toggle",18)(53,"mat-datepicker",null,21),e.qZA()(),e.TgZ(55,"div",16)(56,"mat-form-field",7)(57,"mat-label"),e._uU(58,"Deleted At"),e.qZA(),e._UZ(59,"input",22)(60,"mat-datepicker-toggle",18)(61,"mat-datepicker",null,23),e.qZA()(),e.TgZ(63,"div",24)(64,"button",25),e._uU(65," Salvar "),e.qZA()()()()()()),2&a){const l=e.MAs(46),o=e.MAs(54),Z=e.MAs(62);let y,S;e.Q6J("selectedIndex",t.selectedTabIndex),e.xp6(2),e.Q6J("columns",t.columns)("data",t.channels.data)("totalRecords",t.channels.total),e.xp6(1),e.Q6J("label",t.tabLabel),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("ngIf",null==(y=t.form.get("name"))?null:y.hasError("required")),e.xp6(6),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",2),e.xp6(12),e.Q6J("ngIf",null==(S=t.form.get("url"))?null:S.hasError("pattern")),e.xp6(5),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(7),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(7),e.Q6J("matDatepicker",Z),e.xp6(1),e.Q6J("for",Z),e.xp6(4),e.Q6J("disabled",t.form.invalid)}},dependencies:[h.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.sg,s.u,d.TO,d.KE,d.hX,d.R9,v.Nt,f.gD,g.ey,m.Mq,m.hl,m.nW,A.lW,c.SP,c.uX,D.n]}),n})()}];let Q=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[C.Bz.forChild(R),C.Bz]}),n})();var L=r(6158);let M=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.ez,s.UX,d.lN,v.c,f.LD,m.FA,g.XK,A.ot,c.Nh,Q,L.m]}),n})()}}]);