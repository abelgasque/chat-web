"use strict";(self.webpackChunksecurityapp=self.webpackChunksecurityapp||[]).push([[428],{8428:(U,p,n)=>{n.r(p),n.d(p,{BotModule:()=>Z});var M=n(6895),o=n(4006),l=n(9549),m=n(3848),g=n(4144),v=n(9602),u=n(3238),f=n(4859),t=n(4650);let b=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[u.BQ,u.BQ]}),r})();var h=n(9299),c=n(8746),C=n(529),y=n(2340),I=n(2720);let A=(()=>{class r{constructor(e,a){this.http=e,this.coreService=a,this.baseUrl=`${y.N.baseUrlApi}/v1/api/bot`}createAsync(e){const a=this.coreService.setHeadersBearer();return this.http.post(`${this.baseUrl}`,e,{headers:a})}readAsync(e){let a=new C.LE({fromObject:{page:e.page.toString(),pageSize:e.pageSize.toString()}});const d=this.coreService.setHeadersBearer();return this.http.get(`${this.baseUrl}`,{headers:d,params:a})}readByIdAsync(e){const a=this.coreService.setHeadersBearer();return this.http.get(`${this.baseUrl}/${e}`,{headers:a})}updateAsync(e){const a=this.coreService.setHeadersBearer();return this.http.put(`${this.baseUrl}`,e,{headers:a})}deleteByIdAsync(e){const a=this.coreService.setHeadersBearer();return this.http.delete(`${this.baseUrl}/${e}`,{headers:a})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(C.eN),t.LFG(I.p))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var x=n(7282),S=n(9430),D=n(5936);const T=[{path:"",component:(()=>{class r{constructor(e,a,d,s){this.fb=e,this.service=a,this.sharedService=d,this.messagesService=s,this.tabLabel="Create",this.isEditing=!1,this.selectedTabIndex=0,this.bots=[]}ngOnInit(){this.form=this.fb.group({id:[{value:"",disabled:!0}],name:["",o.kI.required],createdAt:[{value:"",disabled:!0}],updatedAt:[{value:"",disabled:!0}],deletedAt:[{value:"",disabled:!0}],code:["",o.kI.required]}),this.columns=[{name:"name",label:"Name"},{name:"createdAt",label:"Date Create"},{name:"updatedAt",label:"Date Update"},{name:"deletedAt",label:"Date Delete"}],this.filters={page:1,pageSize:25},this.onRead()}onSubmit(){if(this.form.valid){const e=this.form.value;this.sharedService.openSpinner(),this.isEditing?this.service.updateAsync(e).pipe((0,c.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:a=>{this.messagesService.success("Registro atualizado com sucesso:",a),this.form.reset()},error:a=>{this.messagesService.errorHandler(a)}}):this.service.createAsync(e).pipe((0,c.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:a=>{this.messagesService.success("Registro criado com sucesso:",a),this.form.reset()},error:a=>{this.messagesService.errorHandler(a)}})}}onCancel(){this.form.reset(),this.setTab()}setTab(e=0,a=!1,d="Create"){this.selectedTabIndex=e,this.tabLabel=d,this.isEditing=a}handlePage(e){this.filters=e,this.onRead()}onRead(){this.sharedService.openSpinner(),this.service.readAsync(this.filters).pipe((0,c.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:e=>{this.bots=e},error:e=>{this.messagesService.errorHandler(e)}})}onReadById(e){this.sharedService.openSpinner(),this.service.readByIdAsync(e).pipe((0,c.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:a=>{this.bot=a,this.form.patchValue(this.bot),this.setTab(1,!0,"Edit")},error:a=>{this.messagesService.errorHandler(a)}})}onDelete(e){this.sharedService.openSpinner(),this.service.deleteByIdAsync(e).pipe((0,c.x)(()=>{this.sharedService.closeSpinner()})).subscribe({next:a=>{const d=this.bots.findIndex(s=>s?.id===e);this.bots.splice(d,1)},error:a=>{this.messagesService.errorHandler(a)}})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(o.qu),t.Y36(A),t.Y36(x.F),t.Y36(S.K))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-bot"]],decls:42,vars:7,consts:[["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],["label","Search"],[3,"columns","data","totalRecords","eventRead","eventReadById","eventDeleteById"],[3,"label"],[1,"container","mt-4"],[1,"bot-form",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-md-6"],["appearance","outline",1,"w-100"],["matInput","","formControlName","id","readonly",""],["matInput","","formControlName","name","required",""],[1,"col-md-12"],["matInput","","formControlName","code","required",""],[1,"col-md-4"],["matInput","","formControlName","createdAt","readonly",""],["matInput","","formControlName","updatedAt","readonly",""],["matInput","","formControlName","deletedAt","readonly",""],[1,"col-12","d-flex","justify-content-end",2,"gap","12px"],["mat-raised-button","","color","primary","type","button",3,"click"],["mat-raised-button","","color","accent","type","submit",3,"disabled"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-tab-group",0),t.NdJ("selectedIndexChange",function(s){return a.selectedTabIndex=s}),t.TgZ(1,"mat-tab",1)(2,"app-list",2),t.NdJ("eventRead",function(s){return a.handlePage(s)})("eventReadById",function(s){return a.onReadById(s)})("eventDeleteById",function(s){return a.onDelete(s)}),t.qZA()(),t.TgZ(3,"mat-tab",3)(4,"div",4)(5,"form",5),t.NdJ("ngSubmit",function(){return a.onSubmit()}),t.TgZ(6,"div",6)(7,"div",7)(8,"mat-form-field",8)(9,"mat-label"),t._uU(10,"ID"),t.qZA(),t._UZ(11,"input",9),t.qZA()(),t.TgZ(12,"div",7)(13,"mat-form-field",8)(14,"mat-label"),t._uU(15,"Nome"),t.qZA(),t._UZ(16,"input",10),t.qZA()(),t.TgZ(17,"div",11)(18,"mat-form-field",8)(19,"mat-label"),t._uU(20,"C\xf3digo"),t.qZA(),t._UZ(21,"input",12),t.qZA()(),t.TgZ(22,"div",13)(23,"mat-form-field",8)(24,"mat-label"),t._uU(25,"Data de Cria\xe7\xe3o"),t.qZA(),t._UZ(26,"input",14),t.qZA()(),t.TgZ(27,"div",13)(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Data de Atualiza\xe7\xe3o"),t.qZA(),t._UZ(31,"input",15),t.qZA()(),t.TgZ(32,"div",13)(33,"mat-form-field",8)(34,"mat-label"),t._uU(35,"Data de Exclus\xe3o"),t.qZA(),t._UZ(36,"input",16),t.qZA()(),t.TgZ(37,"div",17)(38,"button",18),t.NdJ("click",function(){return a.onCancel()}),t._uU(39," Cancelar "),t.qZA(),t.TgZ(40,"button",19),t._uU(41," Salvar "),t.qZA()()()()()()()),2&e&&(t.Q6J("selectedIndex",a.selectedTabIndex),t.xp6(2),t.Q6J("columns",a.columns)("data",a.bots.data)("totalRecords",a.bots.total),t.xp6(1),t.Q6J("label",a.tabLabel),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(35),t.Q6J("disabled",a.form.invalid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,l.KE,l.hX,m.SP,m.uX,g.Nt,f.lW,D.n]}),r})()}];let B=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.Bz.forChild(T),h.Bz]}),r})();var F=n(7061);let Z=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[M.ez,o.UX,l.lN,m.Nh,g.c,v.FA,u.XK,f.ot,b,B,F.m]}),r})()}}]);